[TWiki](/twiki/Main/WebHome)&gt;![](/twiki/TWiki/TWikiDocGraphics/web-bg-small.gif) [LibrePlan Web](/twiki/LibrePlan/WebHome)&gt;[AnA17S03EnforceDerivedDayAssignmentsWithAllocations](http://wiki.libreplan-enterprise.com/twiki/LibrePlan/AnA17S03EnforceDerivedDayAssignmentsWithAllocations "Topic revision: 5 (05 Jan 2012 - 16:47:21)") (05 Jan 2012, [JavierMoran](/twiki/Main/JavierMoran))[Edit](http://wiki.libreplan-enterprise.com/twiki/bin/edit/LibrePlan/AnA17S03EnforceDerivedDayAssignmentsWithAllocations?t=1520337863 "Edit this topic text")[Attach](/twiki/bin/attach/LibrePlan/AnA17S03EnforceDerivedDayAssignmentsWithAllocations "Attach an image or document to this topic")

 [AnA17S03EnforceDerivedDayAssignmentsWithAllocations](/twiki/LibrePlan/AnA17S03EnforceDerivedDayAssignmentsWithAllocations)
========================================================================================================================================================================================



|                        |                                                                                                                                      |
|------------------------|--------------------------------------------------------------------------------------------------------------------------------------|
| Story summary          | Enforce derived day assigments with non flat allocations                                                                             |
| Iteration              | [AnA17MachineDerivatedAllocation](/twiki/LibrePlan/AnA17MachineDerivatedAllocation)                                         |
| FEA                    | [AnA17S03EnforceDerivedDayAssignmentsWithAllocations](/twiki/LibrePlan/AnA17S03EnforceDerivedDayAssignmentsWithAllocations) |
| Story Lead             |                                                                                                                                      |
| Next Story             |                                                                                                                                      |
| Passed acceptance test | No                                                                                                                                   |

###  Tasks

This analysis story consists of modifying the advanced allocation methods to enforce the derived allocation model in the machines with configuration units.

When a specific allocation assigning a machine is done, derived day assignments are generated per configuration unit of the machine. Each configuration unit has a parameter called *alpha* which sets the amount of time to allocate in a derived day assignment per time allocated conventional day assignment of specific machine allocation. Let's put an example:

-   Suppose that we have a machine M with two configuration units:
    -   Configuration unit 1: alpha 0.5 -&gt; Resource John
    -   Configuration unit 2: alpha 1
-   If now the machine M is assigned in a specific allocation for 3 days with: 8h 8h 4h, the next derived day assignmnets are generated:
    -   Configuration unit 1: 4h 4h 2h (to John).
    -   Configuration unit 2: 8h 8h 4h.



####  Modify the manual allocation to adjust the derived allocated day assignments

Now if the user modifies cells in a specific zoom level of a resource allocation of a machine M with configuration units, the derived day assignments of the configuration units of M in the dates of the period of the cells of the advanced allocation manual modification are not recalculated.

Therefore this task consist of readjusting the derived day assigmnents of the modified manual modified day assigments of the machine M.



####  Modify the stretches and interpolation advanced allocation function for specific machine allocations

As in the manual allocation the stretches and interpolation advanced allocation functions does not recalculate the derived allocations in the case of specific allocations of a machine with configuration unit. So, this task consists of doing this adjustment.

There are two moments which must be corrected:

-   On applying the stretches function from advanced allocation to a specific allocation of a machine.
-   On moving or when a task is moved with a stretches allocation function configurated to a specific machine.



####  Modify the S-curve (sigmoid) allocation function for specific machine allocations

This task consists of modifying the S-curve to generate the derived allocations in the case of beign applied over a specific machine allocation that has been done over a machine with configuration units.



####  Consolidation/Undo consolidation reallocation enforcement of derived allocations

When in a task is consolodated a progress a the day assinged are scaled in the non-consolidated period in order to try to finish the task in the same time period as was initially planned. The amount of hours finally assigned in the non-consolidated period are ***(1-progress porcentage consolidated) percentage of total amount of allocated work to the project***.

If a progress consolidation A is undone, the hours being assigned previously to the consolodation of A are flat allocated in the non-consolidated period.

Currently, however, when a consolidation/undo consolidation is done if this process affects specific machine resource allocation allocations, the derived allocations are not adjusted in the case that the machine has configuration units associated.

###  User stories

-   [ItEr76S09EnforceDerivedDayAssignmentsWithAllocations](/twiki/LibrePlan/ItEr76S09EnforceDerivedDayAssignmentsWithAllocations)

###  Tasks in this story



| [Tasks](http://wiki.libreplan-enterprise.com/twiki/LibrePlan/AnA17S03EnforceDerivedDayAssignmentsWithAllocations?sortcol=0;table=2;up=0#sorted_table "Sort by this column") | [Est](http://wiki.libreplan-enterprise.com/twiki/LibrePlan/AnA17S03EnforceDerivedDayAssignmentsWithAllocations?sortcol=1;table=2;up=0#sorted_table "Sort by this column") | [Spent](http://wiki.libreplan-enterprise.com/twiki/LibrePlan/AnA17S03EnforceDerivedDayAssignmentsWithAllocations?sortcol=2;table=2;up=0#sorted_table "Sort by this column") | [To do](http://wiki.libreplan-enterprise.com/twiki/LibrePlan/AnA17S03EnforceDerivedDayAssignmentsWithAllocations?sortcol=3;table=2;up=0#sorted_table "Sort by this column") | [Risk](http://wiki.libreplan-enterprise.com/twiki/LibrePlan/AnA17S03EnforceDerivedDayAssignmentsWithAllocations?sortcol=4;table=2;up=0#sorted_table "Sort by this column") | [Reviewer](http://wiki.libreplan-enterprise.com/twiki/LibrePlan/AnA17S03EnforceDerivedDayAssignmentsWithAllocations?sortcol=5;table=2;up=0#sorted_table "Sort by this column") | [Developer](http://wiki.libreplan-enterprise.com/twiki/LibrePlan/AnA17S03EnforceDerivedDayAssignmentsWithAllocations?sortcol=6;table=2;up=0#sorted_table "Sort by this column") | [Task Name](http://wiki.libreplan-enterprise.com/twiki/LibrePlan/AnA17S03EnforceDerivedDayAssignmentsWithAllocations?sortcol=7;table=2;up=0#sorted_table "Sort by this column")    | [Start Date](http://wiki.libreplan-enterprise.com/twiki/LibrePlan/AnA17S03EnforceDerivedDayAssignmentsWithAllocations?sortcol=8;table=2;up=0#sorted_table "Sort by this column") | [Est End Date](http://wiki.libreplan-enterprise.com/twiki/LibrePlan/AnA17S03EnforceDerivedDayAssignmentsWithAllocations?sortcol=9;table=2;up=0#sorted_table "Sort by this column") | [End Date](http://wiki.libreplan-enterprise.com/twiki/LibrePlan/AnA17S03EnforceDerivedDayAssignmentsWithAllocations?sortcol=10;table=2;up=0#sorted_table "Sort by this column") |
|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Task                                                                                                                                                                                 | 20                                                                                                                                                                                 | 0                                                                                                                                                                                    | 20                                                                                                                                                                                   | Low                                                                                                                                                                                 | [JavierMoran](/twiki/Main/JavierMoran)                                                                                                                                         |                                                                                                                                                                                          | [Modify the manual allocation to adjust the derived allocated day assignments](/twiki/LibrePlan/AnA17S03EnforceDerivedDayAssignmentsWithAllocations#TasK1)                         |                                                                                                                                                                                           |                                                                                                                                                                                             |                                                                                                                                                                                          |
| Task                                                                                                                                                                                 | 20                                                                                                                                                                                 | 0                                                                                                                                                                                    | 20                                                                                                                                                                                   | Low                                                                                                                                                                                 | [JavierMoran](/twiki/Main/JavierMoran)                                                                                                                                         |                                                                                                                                                                                          | [Modify the stretches and interpolation advanced allocation function for specific machine allocations](/twiki/LibrePlan/AnA17S03EnforceDerivedDayAssignmentsWithAllocations#TasK2) |                                                                                                                                                                                           |                                                                                                                                                                                             |                                                                                                                                                                                          |
| Task                                                                                                                                                                                 | 20                                                                                                                                                                                 | 0                                                                                                                                                                                    | 20                                                                                                                                                                                   | Low                                                                                                                                                                                 | [JavierMoran](/twiki/Main/JavierMoran)                                                                                                                                         |                                                                                                                                                                                          | [Modify the S-curve (sigmoid) allocation function for specific machine allocations](/twiki/LibrePlan/AnA17S03EnforceDerivedDayAssignmentsWithAllocations#TasK3)                    |                                                                                                                                                                                           |                                                                                                                                                                                             |                                                                                                                                                                                          |
| Task                                                                                                                                                                                 | 20                                                                                                                                                                                 | 0                                                                                                                                                                                    | 20                                                                                                                                                                                   | Low                                                                                                                                                                                 | [JavierMoran](/twiki/Main/JavierMoran)                                                                                                                                         |                                                                                                                                                                                          | [Consolidation/Undo consolidation reallocation enforcement of derived allocations](/twiki/LibrePlan/AnA17S03EnforceDerivedDayAssignmentsWithAllocations#TasK4)                     |                                                                                                                                                                                           |                                                                                                                                                                                             |                                                                                                                                                                                          |

###  Total Hours in this Story

| [User](http://wiki.libreplan-enterprise.com/twiki/LibrePlan/AnA17S03EnforceDerivedDayAssignmentsWithAllocations?sortcol=0;table=3;up=0#sorted_table "Sort by this column") | [Spent in XpTracker](http://wiki.libreplan-enterprise.com/twiki/LibrePlan/AnA17S03EnforceDerivedDayAssignmentsWithAllocations?sortcol=1;table=3;up=0#sorted_table "Sort by this column") | [Spent in phpReport](http://wiki.libreplan-enterprise.com/twiki/LibrePlan/AnA17S03EnforceDerivedDayAssignmentsWithAllocations?sortcol=2;table=3;up=0#sorted_table "Sort by this column") | [Ok?](http://wiki.libreplan-enterprise.com/twiki/LibrePlan/AnA17S03EnforceDerivedDayAssignmentsWithAllocations?sortcol=3;table=3;up=0#sorted_table "Sort by this column") |
|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                                                                                                                                                                                     | 0                                                                                                                                                                                                 | 0                                                                                                                                                                                                 | ![DONE](/twiki/TWiki/TWikiDocGraphics/choice-yes.gif "DONE")                                                                                                                   |
| Total                                                                                                                                                                               | 0                                                                                                                                                                                                 | 0                                                                                                                                                                                                 | ![DONE](/twiki/TWiki/TWikiDocGraphics/choice-yes.gif "DONE")                                                                                                                   |

------------------------------------------------------------------------
